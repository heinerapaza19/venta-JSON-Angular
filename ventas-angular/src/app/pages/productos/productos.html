<div class="container mt-4 text-center">
    <h2 class="text-light mb-4">üì¶ Lista de Productos</h2>

    <!-- üîπ FORMULARIO PARA AGREGAR O EDITAR PRODUCTOS -->
    <form (ngSubmit)="guardar()" class="mb-4 bg-dark p-4 rounded shadow text-start text-light">
        
        <!-- üî∏ Primera fila del formulario: campos principales -->
        <div class="row g-3">
            <!-- Campo: Nombre -->
            <div class="col-md-3">
                <input [(ngModel)]="productoActual.nombre" name="nombre" class="form-control" placeholder="Nombre" required>
            </div>

            <!-- Campo: Categor√≠a -->
            <div class="col-md-3">
                <input [(ngModel)]="productoActual.categoria" name="categoria" class="form-control" placeholder="Categor√≠a">
            </div>

            <!-- Campo: Precio -->
            <div class="col-md-2">
                <input [(ngModel)]="productoActual.precio" name="precio" type="number" step="any" class="form-control" placeholder="Precio" required>
            </div>

            <!-- Campo: Stock -->
            <div class="col-md-2">
                <input [(ngModel)]="productoActual.stock" name="stock" type="number" class="form-control" placeholder="Stock" required>
            </div>

            <!-- Bot√≥n para guardar o actualizar -->
            <div class="col-md-2 text-end">
                <!-- Cambia el texto seg√∫n si se est√° editando o creando -->
                <button class="btn btn-success w-100" type="submit">
                    {{ editando ? 'Actualizar' : 'Guardar' }}
                </button>
            </div>
        </div>

        <!-- üî∏ Segunda fila: campo de descripci√≥n -->
        <div class="mt-3 row g-3">
            <div class="col-md-12">
                <input [(ngModel)]="productoActual.descripcion" name="descripcion" class="form-control" placeholder="Descripci√≥n del producto">
            </div>

            <!-- Bot√≥n para cancelar edici√≥n (solo aparece si editando es true) -->
            <div class="col-md-12 text-end" *ngIf="editando">
                <button class="btn btn-secondary btn-sm mt-2" (click)="cancelar()" type="button">
                    Cancelar edici√≥n
                </button>
            </div>
        </div>
    </form>

    <!-- üîπ TABLA DE PRODUCTOS -->
    <div class="table-responsive">
        <table class="table table-striped table-hover table-dark align-middle">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Categor√≠a</th>
                    <th>Precio (S/)</th>
                    <th>Stock</th>
                    <th>Descripci√≥n</th>
                    <th>Acciones</th>
                </tr>
            </thead>

            <tbody>
                <!-- üî∏ Recorre la lista de productos -->
                <tr *ngFor="let p of productos">
                    <td>{{ p.id }}</td>
                    <td>{{ p.nombre }}</td>
                    <td>{{ p.categoria }}</td>
                    <!-- Muestra el precio con 2 decimales -->
                    <td>{{ p.precio | number:'1.2-2' }}</td>
                    <td>{{ p.stock }}</td>
                    <td>{{ p.descripcion }}</td>

                    <!-- üî∏ Botones de acci√≥n -->
                    <td>
                        <!-- Bot√≥n editar -->
                        <button class="btn btn-warning btn-sm me-2" (click)="editar(p)">‚úèÔ∏è</button>
                        <!-- Bot√≥n eliminar -->
                        <button class="btn btn-danger btn-sm" (click)="eliminar(p.id)">üóëÔ∏è</button>
                    </td>
                </tr>

                <!-- üî∏ Mensaje cuando no hay productos registrados -->
                <tr *ngIf="productos.length === 0">
                    <td colspan="7" class="text-center text-muted py-3">
                        No hay productos registrados
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
